job_research_task:
  description: >
    Analyze the job posting at {job_url} and create a detailed report about the requirements,
    responsibilities, and company culture. Make sure to identify and extract the company name
    from the job posting. Focus on key technical skills, experience requirements, and any
    unique aspects of the role that would be important for tailoring a resume.
  expected_output: >
    A comprehensive analysis of the job posting including:
    1. Company name and brief description
    2. Technical skills required
    3. Experience requirements
    4. Company culture and values
    5. Key responsibilities
    6. Any unique or standout requirements
  agent: researcher

profile_task:
  description: >
    Analyze the professional profile in full_profile.md and create a detailed report
    highlighting key skills, experiences, and achievements that could be relevant
    for the job researched.
  expected_output: >
    A detailed analysis of the professional profile including:
    1. Key technical skills and proficiency levels
    2. Notable projects and achievements
    3. Areas of expertise
    4. Professional experience highlights
    5. Educational background and certifications
  agent: profiler

evaluate_profile_fit_task:
  description: >
    Based on the detailed job analysis and the candidate's professional profile analysis,
    evaluate how well the professional's skills, experience, and background match the job requirements.
    Provide a concise fit score from 1 to 5, where 1 is a poor match and 5 is an excellent match.
    Also, provide a brief, actionable explanation for the score, highlighting the main strengths
    that align with the job and any significant gaps or areas for improvement.
  expected_output: >
    A clear assessment of the profile-to-job fit, structured as follows:
    - **Fit Score (1-5):** [Your numerical score, e.g., 4]
    - **Explanation:** [A concise, bullet-point explanation (max 3-4 points) detailing the key reasons
                      for this score. Focus on direct matches and critical mismatches between the
                      profile and the job requirements, suggesting concrete areas for resume/cover letter
                      tailoring or skill development.]
  agent: evaluator

resume_strategy_task:
  description: >
    Tailor the resume from `original_resume.md` to match the target job opportunity described in `job_research.md`, 
    using the candidate's full professional profile found in `full_profile.md`. 
    Ensure the result strictly follows the formatting and writing guidelines defined in `resume_guide.md`.

    The goal is to refine, reorganize, and adapt existing content in the resume to emphasize experiences, 
    qualifications, and skills that are most relevant to the job posting — without adding or fabricating 
    information that does not exist in the candidate's history.

    IMPORTANT: You must NOT create or assume any fictional experience, project, job title, achievement, company, technology, or certification.
    Only include content that is explicitly present in `original_resume.md` and `full_profile.md`.
    If a qualification is missing, DO NOT invent it.

    "IMPORTANT: In addition to using full_profile.md as the main source of verified information, you must also carefully use the context and outputs generated by the previous tasks — such as job_research.md and profile.md — to ensure that the final content is fully aligned with the target job and company requirements."

    Use the structure and sections from `original_resume.md` as the base, keeping the overall layout and format unchanged.
    However, update the content within each section to better align with the requirements and responsibilities in the job description.

    Specific instructions:
    - Use the same language as the job posting (e.g., English or Spanish).
    - Personal and contact information (name, email, phone, LinkedIn, location) must remain **exactly** as written in `original_resume.md`.
      Specifically, the location line must preserve the original message: 
      "Location: São Paulo, Brazil, actively pursuing opportunities abroad and open to relocating."
    - Update all other sections — professional summary, work experience, skills, education, and certifications — using verified information only.
    - In the Skills section, reorganize and adapt the list to emphasize skills that directly match the job description.
      Use only real skills from the profile in `full_profile.md`.
    - In the Certifications section, include **between 5 and 10 certifications** that are most relevant to the job posting, 
      selected from the complete list in `full_profile.md`. Begin the section with:
      "_Selected certifications from a portfolio of 40+ relevant courses (full courses list on LinkedIn profile):_"
    - In the Education section, include the sentence: "*Recognized as the top university in Latin America*"
    - Ensure proper UTF-8 encoding. Do not include broken characters (e.g., "SÃ£o", "â€“", etc.).
    - Do not alter or remove any sections from `original_resume.md`; only modify the content within them.
    - Do **not** add fictional experiences, roles, achievements, or qualifications under any circumstance.
  expected_output: >
    Return only the final resume content in clean UTF-8 text, with no explanations, summaries, or additional messages.
    The result must be ready to be saved directly as a `.md` file (resume.md). Do not include "The resume is ready" or similar messages.
  agent: resume_strategist

cover_letter_strategy_task:
  description: >
    Write a completely new and original cover letter for the candidate, starting entirely from scratch.

    IMPORTANT: Do NOT use or read `original_cover_letter.md`. Ignore any content from previous cover letters.

    The new cover letter must be written exclusively based on:
    - The candidate's verified experiences, skills, and background from `full_profile.md`.
    - The findings and context provided by previous tasks, especially `job_research.md` and `profile.md`.
    - The recommended structure, tone, style, and best practices clearly defined in `cover_letter_guide.md`.

    Key Rules:
    - The letter must be fully customized and aligned with the specific company and remote job opportunity described in `job_research.md`.
    - The writing style must strictly follow the guidelines from `cover_letter_guide.md`.
    - NEVER invent or create any information — only use verified content from `full_profile.md`.
    - REMOVE ALL PLACEHOLDERS (like [Date], [Company Name], [Hiring Manager's Name], [Company Address], etc.).
      If any required data is missing, remove the section or adjust the sentence gracefully — but never leave placeholders.
    - Under no circumstances should the final cover letter contain any placeholders such as [Date], [Company Name], [Hiring Manager's Name], [Company Address], etc.
    - If any of these details are missing from the provided data, REMOVE the entire line or section gracefully. For example, if the hiring manager's name is not available, start the letter with "Dear Hiring Team," or simply "Dear Team,".
    - Never output any square brackets or placeholder text in the final result.

    Mandatory Content:
    - At the beginning of the cover letter (after the name), always include this line exactly as written:
      "Location: São Paulo, Brazil, actively pursuing remote opportunities with international companies."

    - Include a paragraph explaining the candidate is based in Brazil and seeking to contribute remotely to global teams — highlighting how their international experience (LATAM, US) and cross-cultural collaboration add value to distributed organizations.

    Technical Requirements:
    - Use the same language as the job posting (English or Spanish).
    - The final cover letter must be professional, clear, concise — ideally fitting within one page.
    - Ensure clean UTF-8 encoding. Avoid broken characters like "SÃ£o", "â€“", etc.
    - Output the cover letter in clean Markdown format.

  expected_output: >
    Return ONLY the final cover letter text, ready to be saved directly as `cover_letter.md` in Markdown format.
    Do NOT include explanations, summaries, comments, or any extra messages.
    Output ONLY the final content of the new cover letter — fully formatted, professional, and ready to use.
  agent: cover_strategist


compensation_analysis_task:
  description: >
    Based on the company and location information (including country and city when available), determine a realistic and well-informed total compensation range 
    for a Product Manager role. Use publicly available salary benchmarks and industry averages to inform your response. Prioritize data that aligns with the 
    company type (e.g., startup, scale-up, enterprise) and region (e.g., Germany vs. Portugal, or Berlin vs. Munich). 

    If city-level data is unavailable, use the country average and mention that clearly. If company size or industry is known, adjust the estimate accordingly 
    to reflect what is typical for similar organizations in that region.

    Specific instructions:
    - Present the result as a total annual compensation range in euros (EUR) or dollars (USD).
    - Keep the explanation minimal and avoid excessive details about the company or market context.
    - Use this output template:

      "Based on my research and the responsibilities of the role, I believe a fair salary range would be between [lower bound] and [upper bound] per year.

      That said, I'm flexible and open to discussing this further depending on the full compensation package, responsibilities, and opportunities for growth. 
      My main goal is to find a role where I can bring value to the team and continue developing professionally."
  expected_output: >
    A short and well-formatted compensation expectation message using the template provided above. The salary range should be tailored to the job's location 
    and company context, but without unnecessary elaboration. The tone should be confident, professional, and open to negotiation.
  agent: compensation_analyst

final_review_task:
  description: >
    Review all components of the job application — including the job analysis (`job_research.md`), 
    candidate profile (`full_profile.md`), tailored resume (`final_resume.md`), and customized cover letter (`final_cover_letter.md`) — 
    to ensure they are fully aligned with one another and with the job posting.

    Your task is to act as the final checkpoint before submission. Check that:
    - The resume and cover letter reflect the key requirements and language of the job posting.
    - The candidate's strengths are consistently highlighted across documents.
    - The tone, formatting, and structure match professional standards.
    - The documents feel cohesive and strategic when read together.
    - The resume follows the formatting guide (`resume_guide.md`) and the cover letter adheres to the rules in (`cover_letter_guide.md`).
    - All UTF-8 encoding issues have been avoided (no broken characters).
    - The relocation message is present in the cover letter, well-phrased, and adds strategic value.
    - There are no inconsistencies or contradictions between documents.

    Provide:
    1. A list of any issues or misalignments found across documents.
    2. Suggestions for improvement or minor refinements, if any.
    3. A final verdict: "Ready to Submit" or "Needs Revisions", with a short justification.
  expected_output: >
    A structured and actionable final review including:
    - Observed issues or inconsistencies (if any)
    - Suggested improvements
    - Final verdict with explanation
  agent: reviewer
